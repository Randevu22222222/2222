from flask import Flask, render_template, request, jsonify

app = Flask(__name__)

# Пример данных о услугах и отзывах
services = [
    {
        'id': 1,
        'name': 'Разработка веб-приложений',
        'description': 'Создание современных веб-приложений с использованием Flask и других технологий.',
        'price': 'от 2000 грн',
        'details': [
            'Анализ требований',
            'Проектирование архитектуры',
            'Разработка интерфейса',
            'Тестирование и отладка'
        ]
    },
    {
        'id': 2,
        'name': 'Создание API',
        'description': 'Разработка RESTful API для интеграции с другими приложениями.',
        'price': 'от 1500 грн',
        'details': [
            'Проектирование API',
            'Реализация эндпоинтов',
            'Документация API',
            'Тестирование безопасности'
        ]
    },
    {
        'id': 3,
        'name': 'Автоматизация процессов',
        'description': 'Автоматизация рутинных задач для повышения эффективности бизнеса.',
        'price': 'от 1000 грн',
        'details': [
            'Анализ текущих процессов',
            'Разработка автоматизированных решений',
            'Интеграция с существующими системами',
            'Обучение сотрудников'
        ]
    },
    {
        'id': 4,
        'name': 'Консультации по программированию',
        'description': 'Профессиональные консультации по вопросам программирования и разработки.',
        'price': 'по запросу',
        'details': [
            'Оценка проекта',
            'Рекомендации по технологиям',
            'Обсуждение архитектуры',
            'Код-ревью'
        ]
    }
]

# Процесс работы
working_process = [
    {
        "step": "Шаг 1: Консультация и анализ требований",
        "description": "На этом этапе мы встречаемся с клиентом для обсуждения его идей и требований. Мы задаем вопросы, чтобы понять, что именно нужно реализовать, и помогаем сформулировать требования к проекту."
    },
    {
        "step": "Шаг 2: Создание технического задания",
        "description": "После сбора всех необходимых данных мы составляем техническое задание. Это документ, который описывает все аспекты проекта, включая функциональные и нефункциональные требования."
    },
    {
        "step": "Шаг 3: Проектирование и разработка",
        "description": "На этом этапе начинается разработка. Мы создаем архитектуру приложения, разрабатываем интерфейс и реализуем функциональность. Весь процесс сопровождается регулярными проверками и тестированием."
    },
    {
        "step": "Шаг 4: Тестирование и запуск",
        "description": "После завершения разработки мы проводим тестирование приложения, чтобы убедиться в его работоспособности и отсутствии ошибок. После успешного тестирования приложение запускается в рабочую среду."
    },
    {
        "step": "Шаг 5: Поддержка и обновления",
        "description": "После запуска проекта мы продолжаем поддерживать его. Мы предоставляем обновления, исправляем ошибки и помогаем клиенту с любыми возникшими вопросами."
    }
]

testimonials = [
    {
        'client_name': 'Иван Петров',
        'feedback': 'Отличная работа! Все было сделано в срок и на высоком уровне.'
    },
    {
        'client_name': 'Мария Смирнова',
        'feedback': 'Очень довольна сотрудничеством. Рекомендую!'
    },
    {
        'client_name': 'Алексей Иванов',
        'feedback': 'Профессионал своего дела! Помогли с автоматизацией процессов.'
    }
]

faq = [
    {
        "question": "Как долго занимает разработка веб-приложения?",
        "answer": "Сроки зависят от сложности проекта, но в среднем это занимает от 2 до 6 недель."
    },
    {
        "question": "Предоставляете ли вы поддержку после завершения проекта?",
        "answer": "Да, мы предоставляем поддержку и обновления по мере необходимости."
    },
    {
        "question": "Как я могу связаться с вами?",
        "answer": "Вы можете связаться с нами по электронной почте или телефону, указанным на сайте."
    }
]


@app.route('/')
def index():
    return render_template('index.html', services=services, testimonials=testimonials, faq=faq,
                           working_process=working_process)


@app.route('/service/<int:service_id>')
def service_detail(service_id):
    service = next((s for s in services if s['id'] == service_id), None)
    if service:
        return render_template('service_detail.html', service=service)
    return "Услуга не найдена", 404


@app.route('/chat', methods=['POST'])
def chat():
    message = request.form.get('message')

    # Логика для обработки сообщений
    if message:
        response = ""

        # Условия для ответов бота
        if any(keyword in message.lower() for keyword in ["долго", "сколько времени", "время"]):
            response = ("Сроки зависят от сложности проекта. "
                        "В среднем разработка веб-приложения занимает от 2 до 6 недель.")

        elif any(keyword in message.lower() for keyword in ["поддержка", "после завершения"]):
            response = ("Да, мы предоставляем поддержку после завершения проекта. "
                        "Мы также осуществляем обновления по мере необходимости.")

        elif any(keyword in message.lower() for keyword in ["как связаться", "контакты", "связаться"]):
            response = ("Вы можете связаться с нами по электронной почте info@example.com "
                        "или по телефону +380 956-058-232.")

        elif any(keyword in message.lower() for keyword in ["услуги", "что вы предлагаете"]):
            response = ("Мы предлагаем различные услуги программирования: "
                        "- Разработка веб-приложений\n"
                        "- Создание API\n"
                        "- Автоматизация процессов\n"
                        "- Консультации по программированию.")

        elif any(keyword in message.lower() for keyword in ["спасибо", "благодарю"]):
            response = ("Пожалуйста! Если у вас есть дополнительные вопросы или нужна помощь, "
                        "не стесняйтесь спрашивать!")

        else:
            response = f"Спасибо за ваше сообщение: '{message}'. Если вам нужны наши контакты или услуги, просто дайте знать!"

        return jsonify({"response": response}), 200

    return jsonify({"response": "Ошибка: пустое сообщение."}), 400


if __name__ == '__main__':
    app.run(debug=True)